<section>
  <ng-container *ngIf="!credentialData.credential">
    <ng-template [ngTemplateOutlet]="nonsupportCredentialType"></ng-template>
  </ng-container>
  <form
    dForm
    [dValidateRules]="formRules['rule']"
    [formGroup]="credentialFormGroup"
    [layout]="layoutDirection"
  >
    <d-form-item>
      <d-form-label [required]="true">Title</d-form-label>
      <d-form-control>
        <input
          dTextInput
          name="title"
          formControlName="title"
          [dValidateRules]="formRules['title']" />
      </d-form-control>
    </d-form-item>
    <d-form-item *ngIf="JSON.stringify(credentialTypeOptions) !== '[]'">
      <d-form-label [required]="true">Credential Type</d-form-label>
      <d-form-control>
        <d-select
          [options]="credentialTypeOptions"
          [filterKey]="'label'"
          [valueKey]="'value'"
          [dValidateRules]="formRules['credentialType']"
          [appendToBody]="true"
          (valueChange)="onCredentialTypeChange($event)"
          formControlName="credentialType"
        >
        </d-select>
      </d-form-control>
    </d-form-item>
    <d-form-item *ngIf="credentialData.credential">
      <d-form-label [required]="true">Username</d-form-label>
      <d-form-control>
        <input dTextInput name="username" formControlName="username" [dValidateRules]="formRules['username']" />
      </d-form-control>
    </d-form-item>
    <d-form-item *ngIf="credentialData.credential">
      <d-form-label [required]="true">{{ credentialData.credential }}</d-form-label>
      <d-form-control>
        <textarea
          dTextarea
          formControlName="credential"
          resize="vertical"
          [dValidateRules]="formRules['credential']"
        ></textarea>
      </d-form-control>
    </d-form-item>
    <d-form-item *ngIf="credentialData.credential2">
      <d-form-label [required]="true">{{ credentialData.credential2 }}</d-form-label>
      <d-form-control>
         <textarea
           dTextarea
           formControlName="credential2"
           resize="vertical"
         ></textarea>
      </d-form-control>
    </d-form-item>
    <d-form-item *ngIf="credentialData.showPassphrase">
      <d-form-label>Passphrase</d-form-label>
      <d-form-control>
        <input dTextInput name="passphrase" formControlName="passphrase" />
      </d-form-control>
    </d-form-item>
    <d-form-item *ngIf="credentialData.credential">
      <d-form-label [required]="true">Expired Time</d-form-label>
      <d-form-control>
        <d-datepicker-pro
          [format]="'y-MM-dd HH:mm:ss'"
          [appendToBody]="true"
          formControlName="expiredTime"
          [minDate]="minDate"
          [showTime]="true"
        >
        </d-datepicker-pro>
      </d-form-control>
    </d-form-item>
    <d-form-item *ngIf="credentialData.credential">
      <d-form-label>Description</d-form-label>
      <d-form-control>
        <textarea dTextarea name="comment" maxlength="200" style="height: 80px" formControlName="comment"></textarea>
      </d-form-control>
    </d-form-item>
  </form>
</section>

<ng-template #nonsupportCredentialType>
  <d-alert [type]="'warning'" [closeable]="false" style="margin-bottom: 10px"> nonsupport credentialType</d-alert>
</ng-template>
